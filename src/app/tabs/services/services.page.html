<ion-header [translucent]="true">
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start">
      <ion-back-button default-href="/tabs/home" text=""></ion-back-button>
    </ion-buttons>
    <ion-title class="header-title">
      <div class="title-content">
        <h1>Our Services</h1>
        <p>Discover what we can do for you</p>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="services-content">
  <!-- Skeleton Loading -->
  <div class="skeleton-wrapper" *ngIf="isLoading">
    <div class="skeleton-header">
      <ion-skeleton-text animated style="width: 200px; height: 24px; margin-bottom: 8px;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 150px; height: 16px; margin-bottom: 24px;"></ion-skeleton-text>
    </div>
    
    <div class="skeleton-search">
      <ion-skeleton-text animated style="width: 100%; height: 48px; border-radius: 12px; margin-bottom: 16px;"></ion-skeleton-text>
    </div>
    
    <div class="skeleton-filters">
      <ion-skeleton-text animated style="width: 80px; height: 32px; border-radius: 16px; margin-right: 8px; display: inline-block;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 100px; height: 32px; border-radius: 16px; margin-right: 8px; display: inline-block;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 90px; height: 32px; border-radius: 16px; display: inline-block;"></ion-skeleton-text>
    </div>
    
    <div class="skeleton-services">
      <ion-skeleton-text animated style="width: 100%; height: 120px; border-radius: 16px; margin-bottom: 16px;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 100%; height: 120px; border-radius: 16px; margin-bottom: 16px;"></ion-skeleton-text>
      <ion-skeleton-text animated style="width: 100%; height: 120px; border-radius: 16px; margin-bottom: 16px;"></ion-skeleton-text>
    </div>
  </div>

  <!-- Actual Content -->
  <div class="content-wrapper" [class.animate-in]="!isLoading">
    <!-- Search Section -->
    <div class="search-section">
      <ion-item class="search-item">
        <ion-icon name="search-outline" slot="start"></ion-icon>
        <ion-input
          [(ngModel)]="searchTerm"
          placeholder="Search services..."
          (ionInput)="onSearchChange($event)"
          class="search-input">
        </ion-input>
        <ion-icon 
          name="close-circle" 
          slot="end" 
          *ngIf="searchTerm"
          (click)="clearSearch()">
        </ion-icon>
      </ion-item>
    </div>

    <!-- Category Filters -->
    <div class="category-filters">
      <div class="filter-chips">
        <ion-chip
          [class.active]="selectedCategory === 'all'"
          (click)="onCategoryChange('all')"
          class="filter-chip">
          <ion-label>All {{ getCategoryCount('all') }}</ion-label>
        </ion-chip>
        
        <ion-chip
          [class.active]="selectedCategory === 'primary'"
          (click)="onCategoryChange('primary')"
          class="filter-chip">
          <ion-label>Core {{ getCategoryCount('primary') }}</ion-label>
        </ion-chip>
        
        <ion-chip
          [class.active]="selectedCategory === 'secondary'"
          (click)="onCategoryChange('secondary')"
          class="filter-chip">
          <ion-label>Extra {{ getCategoryCount('secondary') }}</ion-label>
        </ion-chip>
        
        <ion-chip
          [class.active]="selectedCategory === 'tertiary'"
          (click)="onCategoryChange('tertiary')"
          class="filter-chip">
          <ion-label>Help {{ getCategoryCount('tertiary') }}</ion-label>
        </ion-chip>
      </div>
    </div>

    <!-- Services Grid -->
    <div class="services-section">
      <div class="section-header" *ngIf="filteredServices.length > 0">
        <h2 class="section-title">{{ getCategoryLabel(selectedCategory) }}</h2>
        <p class="section-subtitle">{{ filteredServices.length }} service{{ filteredServices.length !== 1 ? 's' : '' }} available</p>
      </div>

      <!-- No Results -->
      <div class="no-results" *ngIf="filteredServices.length === 0 && !isLoading">
        <div class="no-results-content">
          <ion-icon name="search-outline" class="no-results-icon"></ion-icon>
          <h3>No services found</h3>
          <p>Try adjusting your search or filter criteria</p>
          <ion-button fill="clear" size="small" (click)="clearFilters()">
            Clear Filters
          </ion-button>
        </div>
      </div>

      <!-- Services Grid -->
      <div class="services-grid" *ngIf="filteredServices.length > 0">
        <div 
          class="service-card" 
          *ngFor="let service of filteredServices"
          (click)="navigateToService(service)"
          [style.background]="service.gradient">
          
          <!-- Service Header -->
          <div class="service-header">
            <div class="service-icon">
              <ion-icon [name]="service.icon"></ion-icon>
            </div>
            
            <div class="service-badges">
              <ion-badge *ngIf="service.isNew" color="success" class="new-badge">New</ion-badge>
              <ion-badge *ngIf="service.isPopular" color="warning" class="popular-badge">Popular</ion-badge>
              <ion-badge *ngIf="service.badge" color="primary" class="custom-badge">{{ service.badge }}</ion-badge>
            </div>
          </div>

          <!-- Service Content -->
          <div class="service-content">
            <h3 class="service-title">{{ service.title }}</h3>
            <p class="service-description">{{ service.description }}</p>
            
            <!-- Service Features -->
            <div class="service-features">
              <div class="feature-tag" *ngFor="let feature of service.features.slice(0, 2)">
                {{ feature }}
              </div>
              <div class="feature-more" *ngIf="service.features.length > 2">
                +{{ service.features.length - 2 }} more
              </div>
            </div>
          </div>

          <!-- Service Footer -->
          <div class="service-footer">
            <ion-button fill="clear" size="small" class="service-action-btn">
              Get Started
              <ion-icon name="arrow-forward-outline" slot="end"></ion-icon>
            </ion-button>
          </div>

          <!-- Hover Effect -->
          <div class="service-overlay"></div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions" *ngIf="filteredServices.length > 0">
      <div class="quick-action-card">
        <div class="quick-action-content">
          <ion-icon name="help-circle-outline" class="quick-action-icon"></ion-icon>
          <div class="quick-action-text">
            <h4>Need Help?</h4>
            <p>Our AI assistant is here to help you 24/7</p>
          </div>
          <ion-button fill="clear" size="small" (click)="navigateToAIChat()">
            Chat Now
          </ion-button>
        </div>
      </div>
    </div>
  </div>
</ion-content> 