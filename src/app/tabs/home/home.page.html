<ion-header [translucent]="true">
  <ion-toolbar class="header-toolbar">
    <div class="header-content">
      <div class="brand-section">
        <h1 class="brand-title">Lida<span class="text-primary">pay</span></h1>
        <p class="brand-subtitle">Your Digital Financial Partner</p>
      </div>
      <div class="header-actions">
        <ion-button fill="clear" class="search-btn" (click)="search()">
          <ion-icon name="search-outline"></ion-icon>
        </ion-button>
        <ion-button
          fill="clear"
          class="notification-btn"
          (click)="openNotification()"
        >
          <ion-icon name="notifications-outline"></ion-icon>
          <ion-badge
            color="danger"
            *ngIf="hasNotifications"
            class="notification-badge"
            >3</ion-badge
          >
        </ion-button>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content">
  <!-- Pull to refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="chevron-down-circle-outline"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing..."
    >
    </ion-refresher-content>
  </ion-refresher>

  <!-- Skeleton Loading -->
  <div class="skeleton-wrapper" *ngIf="isLoading">
    <div class="skeleton-header">
      <ion-skeleton-text
        animated
        style="width: 200px; height: 32px; margin-bottom: 8px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="width: 150px; height: 16px"
      ></ion-skeleton-text>
    </div>

    <div class="skeleton-main-content">
      <ion-skeleton-text
        animated
        style="
          width: 100%;
          height: 120px;
          border-radius: 16px;
          margin-bottom: 24px;
        "
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="
          width: 100%;
          height: 120px;
          border-radius: 16px;
          margin-bottom: 24px;
        "
      ></ion-skeleton-text>
    </div>
  </div>

  <!-- Actual Content -->
  <div class="content-wrapper" [class.animate-in]="!isLoading">
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="hero-content">
        <div class="welcome-message">
          <h2 class="welcome-title">Welcome back!</h2>
          <p class="welcome-subtitle">What would you like to do today?</p>
        </div>
      </div>
    </div>

    <!-- Quick Services Section -->
    <div class="quick-services-section">
      <div class="section-header">
        <h3 class="section-title">Quick Services</h3>
        <ion-button
          fill="clear"
          size="small"
          class="see-all-btn"
          (click)="viewAllServices()"
        >
          See All
        </ion-button>
      </div>

      <div class="quick-services-grid">
        <div class="quick-service-card" (click)="gotoAirtimePage()">
          <div class="service-icon">
            <ion-icon name="cellular-outline"></ion-icon>
          </div>
          <span class="service-label">Airtime Purchase</span>
        </div>

        <div class="quick-service-card" (click)="gotoRemitstarPage()">
          <div class="service-icon">
            <ion-icon name="swap-horizontal-outline"></ion-icon>
          </div>
          <span class="service-label">Funds Transfer</span>
        </div>

        <div class="quick-service-card" (click)="airtimeConversion()">
          <div class="service-icon">
            <ion-icon name="repeat-outline"></ion-icon>
          </div>
          <span class="service-label">Airtime Conversion</span>
        </div>
      </div>
    </div>

    <!-- Transaction Summary Section -->
    <div class="transaction-summary-section">
      <div class="section-header">
        <h3 class="section-title">Transaction Summary</h3>
        <ion-button 
          fill="clear" 
          size="small" 
          class="refresh-btn"
          (click)="refreshTransactionCounts()"
          [disabled]="isLoading">
          <ion-icon name="refresh-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
      
      <div
        class="transaction-card pending-card"
        (click)="viewPendingTransactions()"
      >
        <div class="transaction-icon">
          <ion-icon name="time-outline"></ion-icon>
        </div>
        <div class="transaction-content">
          <h4 class="transaction-title">Pending Transactions</h4>
          <div class="transaction-count">{{ pendingTransactions }}</div>
        </div>
        <div class="transaction-arrow">
          <ion-icon name="chevron-forward-outline"></ion-icon>
        </div>
      </div>

      <div
        class="transaction-card completed-card"
        (click)="viewCompletedTransactions()"
      >
        <div class="transaction-icon">
          <ion-icon name="checkmark-circle-outline"></ion-icon>
        </div>
        <div class="transaction-content">
          <h4 class="transaction-title">Completed Transactions</h4>
          <div class="transaction-count">{{ totalTransactions }}</div>
        </div>
        <div class="transaction-arrow">
          <ion-icon name="chevron-forward-outline"></ion-icon>
        </div>
      </div>
    </div>

    <!-- Main Action Cards -->
    <div class="main-actions">
      <div class="action-card primary-action" (click)="gotoAirtimePage()">
        <div class="action-content">
          <div class="action-icon">
            <ion-icon name="cellular-outline"></ion-icon>
          </div>
          <div class="action-text">
            <h3>Buy Airtime</h3>
            <p>Top up any phone number worldwide</p>
          </div>
        </div>
        <ion-ripple-effect></ion-ripple-effect>
      </div>

      <div class="action-card secondary-action" (click)="gotoInternetPage()">
        <div class="action-content">
          <div class="action-icon">
            <ion-icon name="wifi-outline"></ion-icon>
          </div>
          <div class="action-text">
            <h3>Internet Data</h3>
            <p>High-speed data bundles for all networks</p>
          </div>
        </div>
        <ion-ripple-effect></ion-ripple-effect>
      </div>
    </div>

    <!-- Promotional Banner -->
    <div class="promo-section" *ngIf="showPromo">
      <div class="promo-card">
        <div class="promo-content">
          <div class="promo-text">
            <div class="promo-badge">Special Offer</div>
            <h2 class="promo-title">Get 10% Cashback</h2>
            <p class="promo-description">On your first airtime purchase</p>
            <ion-button fill="clear" size="small" class="promo-btn">
              Learn More
              <ion-icon name="arrow-forward-outline" slot="end"></ion-icon>
            </ion-button>
          </div>
          <div class="promo-decoration">
            <div class="decoration-circle"></div>
            <div class="decoration-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
